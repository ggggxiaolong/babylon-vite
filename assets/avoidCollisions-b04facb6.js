import{E as b,S as I,A as O,V as s,H as E,c as v,M as C,a as l,g as m,i as f,T as g,j as M}from"./babylon.inspector.bundle.max-c73a9ee3.js";import{s as T}from"./tools-be3624d8.js";x();function x(){const c=document.createElement("canvas");c.className="canvas",document.body.appendChild(c);const d=new b(c,!0),t=new I(d);T(2,t);const u=new O("camera",-Math.PI/2,Math.PI/2.5,50,s.Zero(),t);u.attachControl(u,!0),new E("light1",new s(1,1,0),t);const w=new v("wireMat");w.alpha=0;const o=C.CreateBox("carBox",{width:.5,height:.6,depth:4.5});o.material=w,o.position=new s(3.1,.3,-5);let p=!1;l.ImportMeshAsync("","./meshes/","village.glb",t),l.ImportMeshAsync("","./meshes/","car.glb",t).then(n=>{p=!0,n.meshes.forEach(e=>{if(e.name==="car"){e.rotation=new s(Math.PI/2,0,-Math.PI/2),e.position=new s(-3,.1+.125/2,8);const r=new m("carAnimation","position.z",30,m.ANIMATIONTYPE_FLOAT,m.ANIMATIONLOOPMODE_CYCLE),a=[];a.push({frame:0,value:8}),a.push({frame:150,value:-7}),a.push({frame:210,value:-7}),r.setKeys(a),e.animations=[r],t.beginAnimation(e,0,210,!0)}e.name.startsWith("wheel")&&t.beginAnimation(e,0,30,!0)})}),l.ImportMeshAsync("him","./meshes/Dude/","Dude.babylon",t).then(n=>{const e=n.meshes[0];e.scaling=new s(.008,.008,.008),e.position=new s(1.5,0,-6.9),e.rotate(f.Y,g.ToRadians(-90),M.LOCAL);const r=e.rotationQuaternion.clone();t.beginAnimation(n.skeletons[0],0,100,!0,1);const a=[{turn:180,dist:2.5},{turn:0,dist:5}];let i=0,h=0;const A=.015,y=n.meshes[2],L=t.getMeshByName("car");t.onBeforeRenderObservable.add(()=>{p&&!y.intersectsMesh(o)&&L?.intersectsMesh(o)||(h>a[i].dist&&(e.rotate(f.Y,g.ToRadians(a[i].turn),M.LOCAL),i+=1,i%=a.length,i===0&&(h=0,e.position=new s(-6,0,0),e.rotationQuaternion=r.clone())),h+=A,e.movePOV(0,0,A))})}),window.addEventListener("keydown",n=>{n.shiftKey&&n.ctrlKey&&n.altKey&&n.key==="I"&&(t.debugLayer.isVisible()?t.debugLayer.hide():t.debugLayer.show())}),window.addEventListener("resize",function(){d.resize()}),d.runRenderLoop(()=>{t.render()})}
