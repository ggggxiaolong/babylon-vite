import{E as I,S,A as T,V as e,H as k,a as M,g as d,M as g,c as B,l as N,d as y,C as x,m as E,n as u,e as v,P as L,o as b,p as D}from"./babylon.inspector.bundle.max-c73a9ee3.js";z();function z(){const c=document.createElement("canvas");c.className="canvas",document.body.appendChild(c);const w=new I(c,!0),a=new S(w),r=new T("camera",-Math.PI/2,Math.PI/2.5,15,e.Zero(),a);r.attachControl(r,!0),r.upperBetaLimit=Math.PI/2.2,r.upperRadiusLimit=50,r.lowerRadiusLimit=3,new k("light1",new e(0,1,0),a),M.ImportMeshAsync("","./meshes/","valleyvillage.glb",a),M.ImportMeshAsync("","./meshes/","car.glb",a).then(n=>{n.meshes.forEach(i=>{if(i.name==="car"){i.rotation=new e(Math.PI/2,0,-Math.PI/2),i.position=new e(-3,.1+.125/2,8);const f=new d("carAnimation","position.z",30,d.ANIMATIONTYPE_FLOAT,d.ANIMATIONLOOPMODE_CYCLE),m=[];m.push({frame:0,value:10}),m.push({frame:200,value:-15}),f.setKeys(m),i.animations=[f],a.beginAnimation(i,0,200,!0)}i.name.startsWith("wheel")&&a.beginAnimation(i,0,30,!0)})});const O=g.CreateBox("skyBox",{size:150},a),o=new B("skyBoxMat");o.backFaceCulling=!1,o.reflectionTexture=new N("./textures/skyboxCube/skybox",a),o.reflectionTexture.coordinatesMode=y.SKYBOX_MODE,o.diffuseColor=new x(0,0,0),o.specularColor=new x(0,0,0),O.material=o;const p=new E("treeManager","./textures/palm.png",2e3,{width:512,height:1024},a);for(let n=0;n<500;n++){const i=new u("tree",p);i.position=new e(Math.random()*-38,.5,Math.random()*20+8)}for(let n=0;n<500;n++){const i=new u("tree",p);i.position=new e(Math.random()*25+7,.5,Math.random()*-35+8)}const A=new E("treeManager","./textures/ufo.png",1,{width:128,height:76},a),s=new u("ufo",A);s.playAnimation(0,16,!0,125),s.position=new e(0,5,0),s.width=2,s.height=1;const C=[new e(0,0,0),new e(.5,0,0),new e(.5,.2,0),new e(.4,.2,0),new e(.4,.05,0),new e(.05,.1,0),new e(.05,.8,0),new e(.15,.9,0)],h=g.CreateLathe("fountain",{shape:C,sideOrientation:v.DOUBLESIDE},a);h.position=new e(-4,0,-6);const t=new L("particles",5e3,a);t.particleTexture=new y("textures/flare.png"),t.emitter=new e(-4,.8,-6),t.minEmitBox=new e(-.01,0,-.01),t.maxEmitBox=new e(.01,0,.01),t.color1=new b(.7,.8,1,1),t.color2=new b(.2,.5,1,1),t.blendMode=L.BLENDMODE_ONEONE,t.minSize=.01,t.maxSize=.05,t.minLifeTime=.3,t.maxLifeTime=1.5,t.emitRate=1500,t.gravity=new e(0,-9.81,0),t.direction1=new e(-1,8,1),t.direction2=new e(1,8,-1),t.minEmitPower=.2,t.maxEmitPower=.6,t.updateSpeed=.01;let l=!1;function P(n){n===h&&(l=!l,l?t.start():t.stop())}a.onPointerObservable.add(n=>{switch(n.type){case D.POINTERDOWN:n.pickInfo?.hit&&P(n.pickInfo.pickedMesh)}}),window.addEventListener("keydown",n=>{n.shiftKey&&n.ctrlKey&&n.altKey&&n.key==="I"&&(a.debugLayer.isVisible()?a.debugLayer.hide():a.debugLayer.show())}),window.addEventListener("resize",function(){w.resize()}),w.runRenderLoop(()=>{a.render()})}
